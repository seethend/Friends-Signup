CREATE TABLE USERS(
USER_ID INT AUTO_INCREMENT,
USERNAME VARCHAR(100) NOT NULL UNIQUE,
FIRSTNAME VARCHAR(100) NOT NULL,
LASTNAME VARCHAR(100) DEFAULT NULL,
PASSWORD VARCHAR(100) NOT NULL,
EMAILID VARCHAR(100) DEFAULT NULL,
ACTIVE INT DEFAULT NULL,
LASTLOGIN TIMESTAMP,
USERPHOTO BLOB,
PRIMARY KEY (USER_ID)
);

CREATE TABLE UPDATEFRIENDS(
FRIENDS_ONE INT,
FRIENDS_TWO INT,
STATUS INT,
PRIMARY KEY(FRIENDS_ONE,FRIENDS_TWO),
FOREIGN KEY (FRIENDS_ONE) REFERENCES USERS(USER_ID),
FOREIGN KEY (FRIENDS_TWO) REFERENCES USERS(USER_ID)
);

CREATE TABLE USERMESSAGESID(
MSG_ID INT AUTO_INCREMENT,
FONE_ID INT,
FTWO_ID INT,
MSG VARCHAR(120),
R_TIME TIMESTAMP,
PRIMARY KEY(MSG_ID),
FOREIGN KEY (FONE_ID) REFERENCES USERS(USER_ID),
FOREIGN KEY (FTWO_ID) REFERENCES USERS(USER_ID)
);

CREATE TABLE POSTS(
POSTID INT NOT NULL AUTO_INCREMENT,
POST_USERID INT NOT NULL,
POST_MSG VARCHAR(100) DEFAULT NULL,
POST_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY(POSTID),
FOREIGN KEY(POST_USERID) REFERENCES USERS(USER_ID)
);

CREATE TABLE POSTLIKES(
LIKES_ID INT NOT NULL AUTO_INCREMENT,
POSTID INT NOT NULL,
USERID INT NOT NULL,
PRIMARY KEY(LIKES_ID),
FOREIGN KEY(POSTID) REFERENCES POSTS(POSTID),
FOREIGN KEY(USERID) REFERENCES USERS(USER_ID)
);

CREATE TABLE POSTCOMMENTS(
COMMENTID INT NOT NULL AUTO_INCREMENT,
COMM_PID INT NOT NULL,
COMM_UID INT NOT NULL,
COMM_MSG VARCHAR(150) DEFAULT NULL,
COMM_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY(COMMENTID),
FOREIGN KEY(COMM_PID) REFERENCES POSTS(POSTID),
FOREIGN KEY(COMM_UID) REFERENCES USERS(USER_ID)
);

jar -cvf name.war *

INSERT INTO USERMESSAGESID (FONE_ID,FTWO_ID) VALUES(1,2)
INSERT INTO MESSAGESID (MSG,R_TIME) VALUES('hi seethend',NOW())

UPDATE UPDATEFRIENDS SET STATUS = 1 WHERE FRIENDS_ONE=1 AND FRIENDS_TWO = 2;

DELETE FROM UPDATEFRIENDS WHERE FRIENDS_ONE=1 AND FRIENDS_TWO=2;

SELECT USER_ID,USERNAME,FIRSTNAME,LASTNAME,POSTID,POST_USERID,POST_MSG,DATE_FORMAT(POST_TIME,"%d %M at %h:%i") AS POST_TIME FROM POSTS JOIN USERS WHERE USERS.USER_ID=POSTS.POST_USERID ORDER BY POSTID DESC;

SELECT MSG_ID,FONE_ID,FTWO_ID,MSG,DATE_FORMAT(R_TIME,"%d %M at %h:%i") AS R_TIME FROM USERMESSAGESID ORDER BY MSG_ID
